.block_wrapper_schedule
  .block_title
    %h2
      %i.icon-archive
      = t('.summary_files')
    - if (can?(:create, ScheduleEventFile, on: [@allocation_tag_id]) && @allocation_tag_id.class != Array)
      %span.right_buttons
        = button_tag content_tag(:i, nil, class: 'icon-plus'), class: "btn btn_main #{tool.offer_opened? ? '' : 'disabled'}", id: 'new_file', disabled: !tool.offer_opened?
  .file_form
  .block_content
    - no_files = files.nil? || files.empty? ? true : false
    %table.tb_list#tb_lf{ :summary=> t("assignments.list.summary_student_files"), style: (no_files ? 'display: none' : '') }
      %thead{ style: (no_files ? 'display: none' : '')}
        %tr.lines
          %th{id: "name_file"}= t('.name')
          %th.center{id: "size_file" }= t('.size')
          %th.date_column.center{id: "sent_on_file" }= t('.sent_on')
          %th.date_column.center{id: "sent_by_file" }= t('.sent_by')
          -# - if @own_assignment && !disabled
          %th.no_sort{id: "delete_file" }
            .visuallyhidden=t("assignment_files.file.delete")
      %tbody
        = render partial: 'schedule_event_files/files', locals: { files: files }
    .text_none.empty_message{class: (no_files ? "" : "hide_message")}= t(:itens_not_found)

= javascript_include_tag 'tooltip'

:javascript
  $(function(){
    $("#new_file").click(function(){
      $(this).hide();
      // $("#new_file, .edit_file").attr("disabled", "disabled");
      // $(".new_file_btns").removeClass("invisible");
      $.get("#{new_schedule_event_file_path(tool_id: tool.id, tool: tool_type, student_id: student_id, group_id: @group_id, score_type: @score_type)}", function(data){
        $(".file_form").html(data);
        $("#no_itens_message_file").addClass('hide_message');
        $.fancybox.update();
      }).error(function(data){
        var data = $.parseJSON(data.responseText);
        if (typeof(data.alert) != "undefined")
          flash_message(data.alert, 'alert', 'fancybox-outer');
      });
    });
  });
