.block_wrapper.list_exams
  .block_title
    %h2= t(:title, scope: [:exams])

  - unless @exams.blank?
    - all_groups = Offer.find(params[:offer_id]).try(:groups) if params.include?(:offer_id)
    %table.tb_list
      %thead
        %tr.lines
          %th= t('.description')
          %th.large= t('.availability')
          %th.medium= t('.duration')
          %th.medium= t('.status')
          %th.small= t('.grade')
      %tbody
        - @exams.each do |exam|
          %tr.lines{ id: "tr_#{exam.id}" }
            %td
              %div
                .title= link_to exam.name, open_exams_path(allocation_tags_ids: @allocation_tags_ids, exam_id: exam.id), :'data-tooltip' => exam.name, class: 'link_open_exam', id: 'open-exam'

                .description
                  .minimun
                    = raw(truncate exam.description, length: 200, omission: "#{content_tag(:i, nil, class: 'expand icon-ellipsis', :"data-tooltip" => t(".expand_description"), onclick: 'expand_or_compress(this)')}")
                  .complete.invisible
                    = exam.description
                    = content_tag(:i, nil, class: "compress icon-arrow-up-triangle", :"data-tooltip" => t(".compress_description"), onclick: 'expand_or_compress(this)')
            %td.center
              %div= [l(exam.start_date.to_date), l(exam.end_date.to_date)].join(' - ')
              %div= [(exam.start_hour), (exam.end_hour)].join(' - ')
            %td.center= [exam.duration, t('.min')].join(' ')
            - situation = exam.situation(current_user.id)
            %td.center{ class: situation[0] }= situation[1]
            %td.center= ExamUser.get_grade(exam.ac_id, current_user.id)

  - else
    .block_content_text.block_content_text_list.text_none= t(:none, scope: [:exams] )

:javascript
  $(function(){
    $(".link_open_exam").call_fancybox({
      minWidth: '90%',
      minHeight: '80%'
    });
  });
