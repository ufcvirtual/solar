- offer_enrolled = @user_requests.where(status: status)
- if offer_enrolled.any?
  %thead.thead_ucs
    %tr.lines
      %th= t(".type")
      %th= t(".curriculum_unit")
      %th= t(".course")
      %th= t(:semester)
      %th= t(".group")
      %th.no_sort
      %th.no_sort= t(:mysolar_mn_enrollment)
  %tbody
    - offer_enrolled.find_each do |allocation|

      - group = allocation.group
      - offer_info = group.detailed_info

      %tr.lines{class: "uc-#{offer_info[:curriculum_unit].gsub(/\W/, '')} uc-type-#{offer_info[:curriculum_unit_type].gsub(/\W/, '')}", 'data-group-id' => group.id}
        %td= offer_info[:curriculum_unit_type]
        %td
          - unless offer_info[:curriculum_unit_type_id].to_i == 3
            = offer_info[:curriculum_unit]
        %td= offer_info[:course]
        %td= offer_info[:semester]
        %td= group.code
        %td= link_to content_tag(:i, nil, class: 'icon-info'), group_enrollments_path(group.id), class: "btn", id: "enrollment_info_#{group.id}"
        %td
          - period_start, period_end = group.offer.enrollment_period
          - case allocation.try(:status)
          - when Allocation_Pending.to_i
            = link_to t('.cancel_request'), cancel_request_allocation_path(allocation), class: 'btn btn_caution allocation_cancel_request'
          - when Allocation_Pending_Reactivate.to_i
            = link_to t('enrollments.index.cancel_request'), cancel_request_allocation_path(allocation), class: 'btn btn_caution allocation_cancel_request request_reactivate'
          - when Allocation_Activated.to_i
            - if Time.now.between?(period_start, period_end)
              = link_to t('enrollments.index.cancel'), cancel_allocation_path(allocation), class: 'btn btn_caution allocation_cancel_enroll'
            - else
              = label_tag "lb_enrollm", t("enrollments.index.enrolled"), class: 'enrollment_label'
          - when Allocation_Cancelled.to_i
            - if Time.now.between?(period_start, period_end)
              = link_to t('enrollments.index.enroll'), request_reactivate_allocation_path(allocation), class: 'btn btn_default request_enroll request_reactivate'
            - else
              = t('enrollments.index.enrollment_period_expired')
          - when Allocation_Rejected.to_i
            = label_tag "lb_rejected", t("enrollments.index.rejected"), class: 'enrollment_label'

  .block_content_text_list.text_none.empty_message.hide_message
    = t(:item_search_no_found)
- else
  .block_content_text_list.text_none
    = t(:item_search_no_found)