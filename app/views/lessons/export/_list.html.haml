- groups = (!@selected.nil? && @selected == 'GROUP')
.block_wrapper.list_lessons_export{ :"data-link-list" => export_list_lessons_path(allocation_tags_ids: @allocation_tags_ids, lesson_id: @lesson_id) }
  - unless @lmodules.empty?
    - @lmodules.each do |lmodule|
      %div{ class: (groups ? 'block_title_module block_module' : 'block_title') }
        %h2
          %i.icon-class
          = lmodule.name
        - if groups
          .input.groups_tags= render 'groups/groups_tags', groups: lmodule.groups, tool: lmodule, all_groups: nil, paths: nil
      - lessons = lmodule.approved_lessons(current_user.id, @lesson_id, true)
      - unless lessons.blank?
        %table.tb_list
          %thead
            %tr.lines
              %th.no_sort{ style: 'width: 25px;' }
              %th= t('.name')
              %th= t('.type')
              %th.icon= t('.preview')
          %tbody
            - lessons.each do |lesson|
              %tr.lines{ :'data-id' => lesson.id }
                %td= check_box_tag("c_#{lmodule.id}_#{lesson.id}", lesson.id, false, { class: 'cbx_value' })
                %td= lesson.name
                %td= lesson.type_lesson.zero? ? t('lessons.new.archive') : t('lessons.new.link')
                %td= link_to content_tag(:i, nil, class: 'icon-eye'), "#void", onclick: 'open_lesson(this)', :'data-tooltip' => t('.preview_tooltip')
      - else
        .block_content_text_list.text_none= t('.no_lesson')
  - else
    .block_content.block_content_text= t(:lesson_message)

= javascript_include_tag 'tooltip'