%section.all
  .block_title
    %h2= t(:all, :scope => [:scores, :info])
    .tabs.tabs_all
      %ul
        %li= link_to t(:evaluative, scope: [:scores, :info]), '#', class: 'evaluative active', onclick: 'change_tab_tool(this); return false;', :'data-div' => '#evaluative_all', onkeydown: 'click_on_keypress(event, this);', :'arial-label'=> t('scores.info.list_all_evaluative')
        %li= link_to t(:frequency, scope: [:scores, :info]), '#', class: 'frequency', onclick: 'change_tab_tool(this); return false;', :'data-div' => "#frequency_all", onkeydown: 'click_on_keypress(event, this);', :'arial-label'=> t('scores.info.list_all_frequency')
        %li= link_to t(:not_evaluative, scope: [:scores, :info]), '#', class: 'notevaluative', onclick: 'change_tab_tool(this); return false;', :'data-div' => "#notevaluative_all", onkeydown: 'click_on_keypress(event, this);', :'arial-label'=> t('scores.info.list_all_not_evaluative')
  
  .block_content
    .tools.show#evaluative_all
      - unless @tool_evaluative.empty?
        - is_user = (@user.id == current_user.id)
        %table.tb_list{:summary=> t("scores.list.summary_evaluative")}
          %thead
            %tr.lines
              %th#al_eva_tol{style: "width: 20%;"}= t(:tool, scope: [:scores, :info])
              %th#al_eva_tit{style: "width: 40%;"}= t(:title, scope: [:scores, :info])
              %th#al_eva_dat.center.date{style: "width: 25%;"}= t(:date_range, scope: [:scores, :info])
              %th#al_eva_sit.center{style: "width: 20%;"}= t(:situation, :scope => [:scores, :info])
              %th#al_eva_int.center{style: "width: 2%;"}= t(:interactions, scope: [:scores, :info])
              %th#al_eva_gra.center{style: "width: 20%;"}= t(:grade, scope: [:scores, :info])
              %th#al_eva_bla.no_sort
              %th#al_eva_aft.center.no_sort{style: "width: 2%;"}=t('scores.info.new_after_evaluation')
          %tbody
            - @tool_evaluative.each do |tool|
              - available = tool.academic_tool_type != 'Webconference' || !exist_and_offline?(tool.server.to_i)
              %tr.lines
                %td{headers: "al_eva_tol"}
                  = t(tool.academic_tool_type.downcase, scope: [:activerecord, :models])
                %td{headers: "al_eva_tit"}
                  - if tool.opened == 't' && tool.academic_tool_type != 'ScheduleEvent' && tool.situation != 'finished' &&  available
                    = link_to_function tool.name, 'open_tool(this)', :'data-url' => redirect_to_open_scores_path(tool_type: tool.academic_tool_type, ac_id: tool.id, user_id: @user.id, group_id: tool.group_id, situation: tool.situation), onkeydown: 'click_on_keypress(event, this);', :'aria-label' => (tool.academic_tool_type == 'ChatRoom' ? tool.name + t('fancybox.open') : (tool.academic_tool_type == "Webconference" ? t('.access_web', web: tool.name) : tool.name )), class: 'link_content'
                  - else
                    - if tool.academic_tool_type == 'Exam'
                      - if is_user
                        .title= link_to tool.name, '#', disabled: true, :'aria-label' => tool.name + t(:disabled), class: 'disabled'
                      - elsif !@can_open 
                        = link_to_function tool.name, 'open_tool(this)', :'data-url' => redirect_to_open_scores_path(tool_type: tool.academic_tool_type, ac_id: tool.id, user_id: @user.id, group_id: tool.group_id, situation: tool.situation), onkeydown: 'click_on_keypress(event, this);', :'aria-label' => tool.name + t('fancybox.open'), class: 'link_content'
                    - else 
                      .title= link_to tool.name, '#', disabled: true, :'aria-label' => tool.name + t(:disabled), class: 'disabled'
                  .equivalent
                    - unless tool.eq_name.blank?
                      %a{ href: '#', :"data-dropdown" => "#dropdown_eq_1_#{tool.academic_tool_type}_#{tool.id}", onkeydown: 'click_on_keypress(event, this);', :'aria-label' => t('scores.info.equalities') + t(:of) + tool.name }
                        %i.icon-flow-parallel
                        = t('scores.info.equivalency')
                        %i.icon-arrow-down-triangle
                      .dropdown.dropdown-tip{id: "dropdown_eq_1_#{tool.academic_tool_type}_#{tool.id}"}
                        %ul{ class: 'dropdown-menu' }
                          = raw t('scores.info.equivalent', name: tool.eq_name)
                    - else
                      %a{ href: '#', :"data-dropdown" => "#dropdown_eq_1_#{tool.academic_tool_type}_#{tool.id}", :'data-url' => equalities_tools_path(tool_type: tool.academic_tool_type, ac_id: tool.id), onclick: 'open_dropdown(this);', onkeydown: 'click_on_keypress(event, this);', :'aria-label' => t('scores.info.equalities') + t(:of) + tool.name }
                        %i.icon-flow-parallel
                        =t('scores.info.equalities')
                        %i.icon-arrow-down-triangle
                      .dropdown.dropdown-tip{id: "dropdown_eq_1_#{tool.academic_tool_type}_#{tool.id}"}
                        %ul{ class: 'dropdown-menu' }
                  - if tool.academic_tool_type == 'ChatRoom' && tool.type_tool == '1'
                    .participants.equivalent
                      %a{ href: '#', :"data-dropdown" => "#dropdown_p_1_#{tool.academic_tool_type}_#{tool.id}", :'data-url' => participants_chat_room_path(tool.academic_tool_id, ac_id: tool.id), onclick: 'open_dropdown(this);', onkeydown: 'click_on_keypress(event, this);', :'aria-label' => t('scores.info.participants') + t(:of) + tool.name }
                        %i.icon-users
                        =t('scores.info.participants')
                        %i.icon-arrow-down-triangle
                      .dropdown.dropdown-tip{id: "dropdown_p_1_#{tool.academic_tool_type}_#{tool.id}"}
                        %ul{ class: 'dropdown-menu' }  
                %td.center{headers: "al_eva_dat"}
                  - if tool.academic_tool_type.downcase == 'webconference'
                    %div= l(tool.start_hour.to_datetime, format: :at_date)
                  - else
                    %div= [l(tool.start_date.to_date), l(tool.end_date.to_date)].join(' - ')
                    %div= [(tool.start_hour), (tool.end_hour)].join(' - ') unless tool.start_hour.blank?
                %td.center{headers: "al_eva_sit"}
                  %div{class: "assignment_#{(available ? tool.situation : 'not_started')}"}= (available ? t(tool.situation, :scope => [:scores, :situation]) : t(:unavailable, scope: [:webconferences, :list])) unless tool.situation.blank?
                %td.center{headers: "al_eva_int"}
                  - unless tool.count.blank?
                    = link_to_function tool.count, 'open_evaluation(this)', :'data-url' => redirect_to_evaluate_scores_path(tool_type: tool.academic_tool_type, ac_id: tool.id, user_id: @user.id, group_id: tool.group_id, situation: tool.situation, score_type: 'evaluative'), onkeydown: 'click_on_keypress(event, this);', :'aria-label' => (tool.count.to_s + t('scores.info.interactions') + t(:of) + tool.name + t('fancybox.open'))
                %td.center.grade{headers: "al_eva_gra", class: "#{['u', tool.id.to_s, tool.user_id.to_s].join('_')} #{['g', tool.id.to_s, tool.group_id.to_s].join('_')}"}
                  = tool.grade.blank? ? ' - ' : tool.grade.to_f
                %td{headers: "al_eva_bla"}
                  - if (tool.academic_tool_type != 'Exam' && @can_evaluate.include?(tool.academic_tool_type.to_s.tableize.to_sym => :evaluate)) || @can_evaluate.include?(tool.academic_tool_type.to_s.tableize => :calcule_grades)
                    = link_to_function content_tag(:i, nil, class: 'icon-write'), 'open_evaluation(this)', :'data-url' => redirect_to_evaluate_scores_path(tool_type: tool.academic_tool_type, ac_id: tool.id, user_id: @user.id, group_id: tool.group_id, situation: tool.situation, score_type: 'evaluative'), class: 'btn', onkeydown: 'click_on_keypress(event, this);'
                %td.center{headers: "al_eva_aft"}=(tool.new_after_evaluation == 't' ? t('scores.info.new_yes') : t('scores.info.new_no'))
      - else
        .block_content.block_content_text= t(:itens_not_found)

    .tools#frequency_all
      - unless  @tool_frequency.empty?
        - is_user = (@user.id == current_user.id)
        %table.tb_list{:summary=> t("scores.list.summary_frequency")}
          %thead
            %tr.lines
              %th#al_fre_tol{style: "width: 20%;"}= t(:tool, scope: [:scores, :info])
              %th#al_fre_tit{style: "width: 37%;"}= t(:title, scope: [:scores, :info])
              %th#al_fre_dat.center.date{style: "width: 25%;"}= t(:date_range, scope: [:scores, :info])
              %th#al_fre_sit.center{style: "width: 20%;"}= t(:situation, :scope => [:scores, :info])
              %th#al_fre_int.center{style: "width: 2%;"}= t(:interactions, scope: [:scores, :info])
              %th#al_fre_fre.center{style: "width: 20%;"}= t(:frequency, scope: [:scores, :info])
              %th#al_fre_bla.no_sort
              %th#al_fre_aft.center.no_sort{style: "width: 2%;"}=t('scores.info.new_after_evaluation')
          %tbody
            -  @tool_frequency.each do |tool|
              - available = tool.academic_tool_type != 'Webconference' || !exist_and_offline?(tool.server.to_i)
              %tr.lines
                %td{headers: "al_fre_tol"}
                  = t(tool.academic_tool_type.downcase, scope: [:activerecord, :models])
                %td{headers: "al_fre_tit"}
                  - if tool.opened == 't' && tool.academic_tool_type != 'ScheduleEvent' && available
                    = link_to_function tool.name, 'open_tool(this)', :'data-url' => redirect_to_open_scores_path(tool_type: tool.academic_tool_type, ac_id: tool.id, user_id: @user.id, group_id: tool.group_id, situation: tool.situation), onkeydown: 'click_on_keypress(event, this);', :'aria-label' => (tool.academic_tool_type == 'ChatRoom' ? tool.name + t('fancybox.open') : (tool.academic_tool_type == "Webconference" ? t('.access_web', web: tool.name) : tool.name )), class: 'link_content'
                  - else
                    - if tool.academic_tool_type == 'Exam'
                      - if is_user
                        .title= link_to tool.name, '#', disabled: true, :'aria-label' => tool.name + t(:disabled), class: 'disabled'
                      - elsif !@can_open 
                        = link_to_function tool.name, 'open_tool(this)', :'data-url' => redirect_to_open_scores_path(tool_type: tool.academic_tool_type, ac_id: tool.id, user_id: @user.id, group_id: tool.group_id, situation: tool.situation), onkeydown: 'click_on_keypress(event, this);', :'aria-label' => tool.name + t('fancybox.open'), class: 'link_content'
                    - else 
                      .title= link_to tool.name, '#', disabled: true, :'aria-label' => tool.name + t(:disabled), class: 'disabled'
                    
                  .equivalent
                    - unless tool.eq_name.blank?
                      %a{ href: '#', :"data-dropdown" => "#dropdown_eq_2_#{tool.academic_tool_type}_#{tool.id}", onkeydown: 'click_on_keypress(event, this);', :'aria-label' => t('scores.info.equalities') + t(:of) + tool.name }
                        %i.icon-flow-parallel
                        = t('scores.info.equivalency')
                        %i.icon-arrow-down-triangle
                      .dropdown.dropdown-tip{id: "dropdown_eq_2_#{tool.academic_tool_type}_#{tool.id}"}
                        %ul{ class: 'dropdown-menu' }
                          = raw t('scores.info.equivalent', name: tool.eq_name)
                    - else
                      %a{ href: '#', :"data-dropdown" => "#dropdown_eq_2_#{tool.academic_tool_type}_#{tool.id}", :'data-url' => equalities_tools_path(tool_type: tool.academic_tool_type, ac_id: tool.id), onclick: 'open_dropdown(this);', onkeydown: 'click_on_keypress(event, this);', :'aria-label' => t('scores.info.equalities') + t(:of) + tool.name }
                        %i.icon-flow-parallel
                        =t('scores.info.equalities')
                        %i.icon-arrow-down-triangle
                      .dropdown.dropdown-tip{id: "dropdown_eq_2_#{tool.academic_tool_type}_#{tool.id}"}
                        %ul{ class: 'dropdown-menu' }
                  - if tool.academic_tool_type == 'ChatRoom' && tool.type_tool == '1'
                    .participants.equivalent
                      %a{ href: '#', :"data-dropdown" => "#dropdown_p_2_#{tool.academic_tool_type}_#{tool.id}", :'data-url' => participants_chat_room_path(tool.academic_tool_id, ac_id: tool.id), onclick: 'open_dropdown(this);', onkeydown: 'click_on_keypress(event, this);', :'aria-label' => t('scores.info.participants') + t(:of) + tool.name }
                        %i.icon-users
                        =t('scores.info.participants')
                        %i.icon-arrow-down-triangle
                      .dropdown.dropdown-tip{id: "dropdown_p_2_#{tool.academic_tool_type}_#{tool.id}"}
                        %ul{ class: 'dropdown-menu' }
                %td.center{headers: "al_fre_dat"}
                  - if tool.academic_tool_type.downcase == 'webconference'
                    %div= l(tool.start_hour.to_datetime, format: :at_date)
                  - else
                    %div= [l(tool.start_date.to_date), l(tool.end_date.to_date)].join(' - ')
                    %div= [(tool.start_hour), (tool.end_hour)].join(' - ') unless tool.start_hour.blank?
                %td.center{headers: "al_fre_sit"}
                  %div{class: "assignment_#{(available ? tool.situation : 'not_started')}"}= (available ? t(tool.situation, :scope => [:scores, :situation]) : t(:unavailable, scope: [:webconferences, :list])) unless tool.situation.blank?
                %td.center{headers: "al_fre_int"}
                  - unless tool.count.blank?
                    = link_to_function tool.count, 'open_evaluation(this)', :'data-url' => redirect_to_evaluate_scores_path(tool_type: tool.academic_tool_type, ac_id: tool.id, user_id: @user.id, group_id: tool.group_id, situation: tool.situation, score_type: 'frequency'), onkeydown: 'click_on_keypress(event, this);', :'aria-label' => (tool.count.to_s + t('scores.info.interactions') + t(:of) + tool.name + t('fancybox.open'))
                %td.center.wh{headers: "al_fre_fre", class: "#{['u', tool.id.to_s, tool.user_id.to_s].join('_')} #{['g', tool.id.to_s, tool.group_id.to_s].join('_')}"}= (tool.working_hours.blank? ? ' - ' : tool.working_hours.to_i)
                %td{headers: "al_fre_bla"}
                  - if (tool.academic_tool_type != 'Exam' && @can_evaluate.include?(tool.academic_tool_type.to_s.tableize.to_sym => :evaluate)) || @can_evaluate.include?(tool.academic_tool_type.to_s.tableize.to_sym => :calcule_grades)
                    = link_to_function content_tag(:i, nil, class: 'icon-write'), 'open_evaluation(this)', :'data-url' => redirect_to_evaluate_scores_path(tool_type: tool.academic_tool_type, ac_id: tool.id, user_id: @user.id, group_id: tool.group_id, situation: tool.situation, score_type: 'frequency'), class: 'btn', onkeydown: 'click_on_keypress(event, this);'
                %td.center{headers: "al_fre_aft"}=(tool.new_after_evaluation == 't' ? t('scores.info.new_yes') : t('scores.info.new_no'))
      - else
        .block_content.block_content_text= t(:itens_not_found)

    .tools#notevaluative_all
      - unless @tool_not_evaluative.empty?
        - is_user = (@user.id == current_user.id)
        %table.tb_list{:summary=> t("scores.list.summary_notevaluative")}
          %thead
            %tr.lines
              %th#al_not_tol{style: "width: 20%;"}= t(:tool, scope: [:scores, :info])
              %th#al_not_tit{style: "width: 35%;"}= t(:title, scope: [:scores, :info])
              %th#al_not_dat.center.date{style: "width: 25%;"}= t(:date_range, scope: [:scores, :info])
              %th#al_not_sit.center{style: "width: 20%;"}= t(:situation, :scope => [:scores, :info])
              %th#al_not_int.center{style: "width: 2%;"}= t(:interactions, scope: [:scores, :info])
              %th#al_not_bla.no_sort
          %tbody
            -  @tool_not_evaluative.each do |tool|
              - available = tool.academic_tool_type != 'Webconference' || !exist_and_offline?(tool.server.to_i)
              %tr.lines
                %td{headers: "al_not_tol"}
                  = t(tool.academic_tool_type.downcase, scope: [:activerecord, :models])
                %td{headers: "al_not_tit"}
                  - if tool.opened == 't' && tool.academic_tool_type != 'ScheduleEvent' && available
                    = link_to_function tool.name, 'open_tool(this)', :'data-url' => redirect_to_open_scores_path(tool_type: tool.academic_tool_type, ac_id: tool.id, user_id: @user.id, group_id: tool.group_id, situation: tool.situation), onkeydown: 'click_on_keypress(event, this);', :'aria-label' => (tool.academic_tool_type == 'ChatRoom' ? tool.name + t('fancybox.open') : (tool.academic_tool_type == "Webconference" ? t('.access_web', web: tool.name) : tool.name )), class: 'link_content'
                  - else
                    - if tool.academic_tool_type == 'Exam'
                      - if is_user
                        .title= link_to tool.name, '#', disabled: true, :'aria-label' => tool.name + t(:disabled), class: 'disabled'
                      - elsif !@can_open 
                        = link_to_function tool.name, 'open_tool(this)', :'data-url' => redirect_to_open_scores_path(tool_type: tool.academic_tool_type, ac_id: tool.id, user_id: @user.id, group_id: tool.group_id, situation: tool.situation), onkeydown: 'click_on_keypress(event, this);', :'aria-label' => tool.name + t('fancybox.open'), class: 'link_content'
                    - else 
                      .title= link_to tool.name, '#', disabled: true, :'aria-label' => tool.name + t(:disabled), class: 'disabled'
                  .equivalent
                    - unless tool.eq_name.blank?
                      %a{ href: '#', :"data-dropdown" => "#dropdown_eq_3_#{tool.academic_tool_type}_#{tool.id}", onkeydown: 'click_on_keypress(event, this);', :'aria-label' => t('scores.info.equalities') + t(:of) + tool.name }
                        %i.icon-flow-parallel
                        = t('scores.info.equivalency')
                        %i.icon-arrow-down-triangle
                      .dropdown.dropdown-tip{id: "dropdown_eq_3_#{tool.academic_tool_type}_#{tool.id}"}
                        %ul{ class: 'dropdown-menu' }
                          = raw t('scores.info.equivalent', name: tool.eq_name)
                    - else
                      %a{ href: '#', :"data-dropdown" => "#dropdown_eq_3_#{tool.academic_tool_type}_#{tool.id}", :'data-url' => equalities_tools_path(tool_type: tool.academic_tool_type, ac_id: tool.id), onclick: 'open_dropdown(this);', onkeydown: 'click_on_keypress(event, this);', :'aria-label' => t('scores.info.equalities') + t(:of) + tool.name }
                        %i.icon-flow-parallel
                        =t('scores.info.equalities')
                        %i.icon-arrow-down-triangle
                      .dropdown.dropdown-tip{id: "dropdown_eq_3_#{tool.academic_tool_type}_#{tool.id}"}
                        %ul{ class: 'dropdown-menu' }
                  - if tool.academic_tool_type == 'ChatRoom' && tool.type_tool == '1'
                    .participants.equivalent
                      %a{ href: '#', :"data-dropdown" => "#dropdown_p_3_#{tool.academic_tool_type}_#{tool.id}", :'data-url' => participants_chat_room_path(tool.academic_tool_id, ac_id: tool.id), onclick: 'open_dropdown(this);', onkeydown: 'click_on_keypress(event, this);', :'aria-label' => t('scores.info.participants') + t(:of) + tool.name }
                        %i.icon-users
                        =t('scores.info.participants')
                        %i.icon-arrow-down-triangle
                      .dropdown.dropdown-tip{id: "dropdown_p_3_#{tool.academic_tool_type}_#{tool.id}"}
                        %ul{ class: 'dropdown-menu' }  
                %td.center{headers: "al_not_dat"}
                  - if tool.academic_tool_type.downcase == 'webconference'
                    %div= l(tool.start_hour.to_datetime, format: :at_date)
                  - else
                    %div= [l(tool.start_date.to_date), l(tool.end_date.to_date)].join(' - ')
                    %div= [(tool.start_hour), (tool.end_hour)].join(' - ') unless tool.start_hour.blank?
                %td.center{headers: "al_not_sit"}
                  %div{class: "assignment_#{(available ? tool.situation : 'not_started')}"}= (available ? t(tool.situation, :scope => [:scores, :situation]) : t(:unavailable, scope: [:webconferences, :list])) unless tool.situation.blank?
                %td.center{headers: "al_not_int"}
                  - unless tool.count.blank?
                    = link_to_function tool.count, 'open_evaluation(this)', :'data-url' => redirect_to_evaluate_scores_path(tool_type: tool.academic_tool_type, ac_id: tool.id, user_id: @user.id, group_id: tool.group_id, situation: tool.situation, score_type: 'not_evaluative'), onkeydown: 'click_on_keypress(event, this);', :'aria-label' => (tool.count.to_s + t('scores.info.interactions') + t(:of) + tool.name + t('fancybox.open'))
                %td{headers: "al_not_bla"}
                  - if ['Assignment', 'Exam'].include?(tool.academic_tool_type) && ((tool.academic_tool_type != 'Exam' && @can_evaluate.include?(tool.academic_tool_type.to_s.tableize.to_sym => :evaluate)) || @can_evaluate.include?(tool.academic_tool_type.to_s.tableize => :calcule_grades))
                    = link_to_function content_tag(:i, nil, class: 'icon-write'), 'open_evaluation(this)', :'data-url' => redirect_to_evaluate_scores_path(tool_type: tool.academic_tool_type, ac_id: tool.id, user_id: @user.id, group_id: tool.group_id, situation: tool.situation, score_type: 'not_evaluative'), class: 'btn', onkeydown: 'click_on_keypress(event, this);'
                        
      - else
        .block_content.block_content_text= t(:itens_not_found)
     

= javascript_include_tag 'tablesorter', 'tooltip', 'scores'
